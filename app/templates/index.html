<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Sentiment Analysis</title>
    <link rel="stylesheet" href="{{ url_for('static', filename='style.css') }}">
</head>
<body>
    <div class="container">
        <h1>Sentiment Analysis</h1>
        <textarea id="text-input" placeholder="Enter your text here..."></textarea>
        <select id="language-select">
            <option value="auto">Auto Detect</option>
            <option value="en">English</option>
            <option value="es">Spanish</option>
            <option value="fr">French</option>
            <option value="de">German</option>
            <option value="it">Italian</option>
            <option value="zh">Chinese</option>
            <option value="hi">Hindi</option> <!-- Hindi added -->
        </select>
        <button id="analyze-btn">
          <span>Analyze Sentiment</span>
          <div class="loader"></div>
      </button>
      <div id="result" class="result-box">
          <div class="result-text">Sentiment: <span id="sentiment-label">-</span></div>
          <div class="result-text">Confidence: <span id="confidence-score">-</span></div>
      </div>
  </div>
</div>

<script>
  document.getElementById("analyze-btn").addEventListener("click", async () => {
      const text = document.getElementById("text-input").value;
      const language = document.getElementById("language-select").value;
      const resultDiv = document.getElementById("result");
      const sentimentLabel = document.getElementById("sentiment-label");
      const confidenceScore = document.getElementById("confidence-score");
      const analyzeBtn = document.getElementById("analyze-btn");

      if (!text) {
          resultDiv.classList.remove("positive", "negative", "neutral");
          sentimentLabel.innerText = "Please enter some text!";
          confidenceScore.innerText = "-";
          return;
      }

      // Show loading animation
      analyzeBtn.classList.add("loading");
      sentimentLabel.innerText = "Analyzing...";
      confidenceScore.innerText = "-";

      try {
          const response = await fetch("/analyze", {
              method: "POST",
              headers: { "Content-Type": "application/json" },
              body: JSON.stringify({ text, language })
          });

          const data = await response.json();
          sentimentLabel.innerText = data.label;
          confidenceScore.innerText = data.score.toFixed(2);

          // Add color based on sentiment
          resultDiv.classList.remove("positive", "negative", "neutral");
          if (data.label === "POSITIVE") {
              resultDiv.classList.add("positive");
          } else if (data.label === "NEGATIVE") {
              resultDiv.classList.add("negative");
          } else {
              resultDiv.classList.add("neutral");
          }
      } catch (error) {
          sentimentLabel.innerText = "Error";
          confidenceScore.innerText = "-";
      } finally {
          // Hide loading animation
          analyzeBtn.classList.remove("loading");
      }
  });
</script>
</body>
</html>